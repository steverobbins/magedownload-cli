MageDownload CLI
===

[![Build Status](https://travis-ci.org/steverobbins/magedownload-cli.svg?branch=master)](https://travis-ci.org/steverobbins/magedownload-cli)
[![Scrutinizer Code Quality](https://scrutinizer-ci.com/g/steverobbins/magedownload-cli/badges/quality-score.png?b=master)](https://scrutinizer-ci.com/g/steverobbins/magedownload-cli/?branch=master)
[![codecov.io](https://codecov.io/github/steverobbins/magedownload-cli/coverage.svg?branch=master)](https://codecov.io/github/steverobbins/magedownload-cli?branch=master)

A PHP tool to automate Magento release and patch downloads using [Magento's download API](https://gist.github.com/piotrekkaminski/9bc45ec84028611d621e).

![Example](http://i.imgur.com/z1dcTvs.gif)
![Example with Prompts](http://i.imgur.com/SDPF62k.gif)

# Installation

### .phar

Download the `.phar` with `wget`

```
wget http://magedownload.steverobbins.com/download/latest/magedownload.phar
```

Or with `cURL`

```
curl -O http://magedownload.steverobbins.com/download/latest/magedownload.phar
```

It's now ready to use: `php magedownload.phar help`

If you want to make it available anywhere on your system

```
chmod +x magedownload.phar
mv magedownload.phar /usr/local/bin/magedownload
```

And can be used: `magedownload help`

[See all releases](http://magedownload.steverobbins.com/download/)

### n98 magerun

* Clone to your modules directory
* Install with composer

```
mkdir -p ~/.n98-magerun/modules
cd ~/.n98-magerun/modules
git clone https://github.com/steverobbins/magedownload-cli
cd magedownload-cli
curl -sS https://getcomposer.org/installer | php
php composer.phar install
```

### Source

* Clone this repository
* Install with composer

```
git clone https://github.com/steverobbins/magedownload-cli
cd magedownload-cli
curl -sS https://getcomposer.org/installer | php
php composer.phar install
```

# Usage

See the help command for all command information:

    $ php magedownload.phar help

## Configuration

To use the Magento download API you must have a user ID and token.  These can be generated by logging into your account on [magento.com](https://magento.com/) and navigating to **Account Settings** -> **Downloads Access Token**.

Once you have your credentials, you can either specify them with each command (using `--id` and `--token` options), or use the `configure` command to save the settings to your environment (in `~/.magedownload/config.yaml`).

See `php magedownload.phar help configure` for details.

## Commands

### `download`

    $ php magedownload.phar download [<name>] [<destination>] [--extract]

or

    $ php n98-magerun.phar download:download [<name>] [<destination>] [--extract]

Downloads the specified file to the given destination.  Use the `files` command to find the correct `<name>`.

If no name is given, you will be prompted to select a file to download.

If no destination is given, the file is downloaded to current directory.

When `--extract` is given, the downloaded file will be extracted when possible.  The destination must end with `.zip`, `.tar.bz2`, or `.tar.gz`.  The files will be extracted to a folder of the same name, without the file extension.

### `files`

    $ php magedownload.phar files

or

    $ php n98-magerun.phar download:files

Lists files that are available for download.

You may use either `--filter-version` or `--filter-type` options to narrow your search.  Examples:

* `php magedownload.phar files --filter-version 1.9.2.2`
* `php magedownload.phar files --filter-version "1.9.*"`
* `php magedownload.phar files --filter-type ce-full`

_* Due to limitiations with the API, only one filter may be used at a time._


### `versions`

    $ php magedownload.phar versions

or

    $ php n98-magerun.phar download:versions

Lists all Magento versions that have been released.

# Support

Please [create an issue](https://github.com/steverobbins/magedownload-cli/issues/new) for all bugs and feature requests.

# Contributing

Fork this repository and send a pull request to the `dev` branch.

# License

[Creative Commons Attribution 4.0 International](https://creativecommons.org/licenses/by/4.0/)
